<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<title>Gestione Soggetti</title>

	<!-- Bootstrap CSS -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
	<!-- Bootstrap Icons -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
	<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</head>

<body class="bg-light">
	<div th:replace="~{fragments/navbar :: navbar}"></div>
	<div class="container mt-5">
		<div class="card shadow-lg mt-5">

			<div class="card-header bg-primary text-white text-center">
				<h3 class="mb-0">Lista Soggetti</h3>
			</div>

			<div class="card-body">
				<div class="table-responsive">

					<table class="table table-striped table-bordered">
						<thead class="table-dark text-center">
							<tr>
								<th>ID</th>
								<th>Nome</th>
								<th>Cognome</th>
								<th>Sesso</th>
								<th>Data Nascita</th>
								<th>Stato Anagrafico</th>
								<th>Email</th>
								<th>Tipo Email</th>
								<th>Ultimo Aggiornamento Email</th>
								<th>Azioni</th>
							</tr>
						</thead>

						<tbody>
							<tr th:each="soggetto : ${soggetti}" class="text-center">
								<td th:text="${soggetto.id}"></td>
								<td th:text="${soggetto.nome}"></td>
								<td th:text="${soggetto.cognome}"></td>
								<td th:text="${soggetto.sesso}"></td>
								<td th:text="${soggetto.dataNascita}"></td>
								<td th:text="${soggetto.statoAnagrafico.descrizione}"></td>
								<td th:text="${soggetto.email != null ? soggetto.email.indirizzoEmail : 'N/A'}"></td>
								<td th:text="${soggetto.email != null ? soggetto.email.tipoEmail : 'N/A'}"></td>
								<td th:text="${soggetto.email != null ? soggetto.email.dataAggiornamento : 'N/A'}"></td>
								<td>
									<a th:href="@{/soggetti/modifica/{id}(id=${soggetto.id})}" class="btn btn-warning btn-sm">
										<i class="bi bi-pencil-square"></i>
									</a>
								</td>
							</tr>
						</tbody>
					</table>

				</div>
			</div>

		</div>
	</div>
</body>